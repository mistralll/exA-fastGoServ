# これはなに
実験A最終課題のリポジトリ。
ｸｿﾃﾞｶCSVは重すぎるから .gitingore してます。

# データ下処理
### ソートしてマージ
1. geotag.csv を id でソートする
2. tag.csv を tag でソートする

3. マージする
```
id, tag, date-time, x, y, url
```
形式のデータを作る

### 無駄なデータの削除とソート
1. タグが一件もない画像のidを削除
2. 第一条件 tag 第二条件 date-time でソート
3. 同じタグの中で100件を超える行を削除

### ラズパイの検索を最適化（案1）
1. データテーブルとインデックステーブルを作成
```
data: [x, y, date-time, URL]
index: [tag, start, cnt]
```
ラズパイ上の検索では、index.csvのデータを主記憶上に保持し、
検索リクエストが飛んできたら二分探索によりstartとcntの値を取得する
dataは適当に分割し、（100MBずつくらい？）startからcnt行拾ってきてHTMLを整形する

### ラズパイの検索を最適化（案2）
データを持ってくるのに時間がかかる気がするので、持ってくるデータを最低限にしたい。
{{tag}}.csv に画像データ x, y, date-time, URL の csv を作り、
アクセスがあったときにデータの読み込みを過不足なく行いHTMLを生成する。

### ラズパイの検索を最適化（案3）
もはやHTMLを作っておけばよいのでは
これでO(1)だね！！！
データが結構な量になるのでオーバーヘッドがすごそう。案2とどっちがいいかな


# パッケージとか
### csvUtil
csv ファイルの下処理用パッケージ。ソートとか分割とか。
はじめに作っているのでコードが汚い。